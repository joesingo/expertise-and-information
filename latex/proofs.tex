\section{Proofs}
\label{app_proofs}

\begin{proof}[Proof of \cref{lemma_r_equiv_reln}]

    We first show that $R$ is reflexive and has the \emph{Euclidean property}
    ($xRy$ and $xRz$ implies $yRz$). For reflexivity, let $\Gamma \in X_{\sL}$.
    Suppose $\A\phi \in \Gamma$. By $\Tuniv$ and closure of maximally
    consistent sets under modus ponens, $\phi \in \Gamma$. Hence $\Gamma R
    \Gamma$.

    For the Euclidean property, suppose $\Gamma R \Delta$ and $\Gamma R
    \Lambda$. We show $\Delta R \Lambda$ by contraposition. Suppose $\phi
    \notin \Lambda$.  Since $\Gamma R \Lambda$, this means $\A\phi \notin
    \Gamma$. Hence $\neg\A\phi \in \Gamma$, and by $\fiveuniv$ we get
    $\A\neg\A\phi \in \Gamma$. Now $\Gamma R \Delta$ gives $\neg\A\phi \in
    \Delta$, so $\A\phi \notin \Delta$.

    To conclude we need to show $R$ is symmetric and transitive.  For symmetry,
    suppose $\Gamma R \Delta$. By reflexivity, $\Gamma R \Gamma$. The Euclidean
    property therefore gives $\Delta R \Gamma$. For transitivity, suppose
    $\Gamma R \Delta$ and $\Delta R \Lambda$. By symmetry, $\Delta R \Gamma$.
    The Euclidean property again gives $\Gamma R \Lambda$.
\end{proof}

\begin{proof}[Proof of \cref{lemma_xsigma_properties}]

        Part \refitem{item_xsigma_mem} was shown in the main text. For
        \refitem{item_xsigma_imp}, note that by \refitem{item_xsigma_mem} we
        have
        \[
        \begin{aligned}
            \A(\phi \limplies \psi) \in \Sigma
            &\iff |\phi \limplies \psi|_\Sigma = X_\Sigma \\
            &\iff \forall \Gamma \in X_\Sigma: \phi \limplies \psi \in
                \Gamma
        \end{aligned}
        \]
        Suppose $\A(\phi \limplies \psi) \in \Sigma$. Take $\Gamma \in
        |\phi|_\Sigma$. Then we have $\phi, \phi \limplies \psi \in
        \Gamma$, so $\psi \in \Gamma$. This shows $|\phi|_\Sigma
        \subseteq |\psi|_\Sigma$.
        %
        Conversely, suppose $|\phi|_\Sigma \subseteq |\psi|_\Sigma$.
        Take $\Gamma \in X_\Sigma$. If $\phi \notin \Gamma$ then
        $\neg\phi \in \Gamma$, so $\neg\phi \lor \psi \in \Gamma$ and
        thus $\phi \limplies \psi \in \Gamma$. If $\phi \in \Gamma$
        then $\Gamma \in |\phi|_\Sigma \subseteq |\psi|_\Sigma$, so
        $\psi \in \Gamma$. Thus $\phi \limplies \psi \in \Gamma$ in
        this case too. Hence $\A(\phi \limplies \psi) \in \Sigma$.

       For \refitem{item_xsigma_iff} first note that $\A(\alpha \land \beta)
       \in \Sigma$ iff both $\A\alpha \in \Sigma$ and $\A\beta \in \Sigma$.
       This can be shown using $\Kuniv$, $\modpon$ and instances of the
       propositional tautologies $(p \land q) \limplies p$ (for the
       left-to-right implication) and $p \limplies q \limplies (p \land q))$
       (for the right-to-left implication).
        %
        Recalling that $\phi \liff \psi$ is an abbreviation for $(\phi
        \limplies \psi) \land (\psi \limplies \phi)$, we get
        \[
        \begin{aligned}
            \A(\phi \liff \psi) \in \Sigma
            &\iff \A(\phi \limplies \psi) \in \Sigma \text{ and }
                \A(\psi \limplies \phi) \in \Sigma \\
            &\iff |\phi|_\Sigma \subseteq |\psi|_\Sigma \text { and }
                |\psi|_\Sigma \subseteq |\phi|_\Sigma \\
            & \iff |\phi|_\Sigma = |\psi|_\Sigma
        \end{aligned}
        \]
        as required.

\end{proof}

\begin{proof}[Proof of \cref{thm_mint_axiomatisation}]

Soundness was shown in the main text. For completeness, we adopt a roughly
similar approach to the general case. Let consistency, maximal consistency and
other standard notions and notation be defined as before, but now for $\sLint$
instead of $\sL$. Let $X_{\sLint}$ be the set of maximally $\sLint$-consistent
sets. Define the relation $R$ on $X_{\sLint}$ in exactly the same way. Since
$\sLint$ extends $\sL$, $R$ is again an equivalence relation, and we have the
analogues of \cref{lemma_xsigma_properties,cor_xsigma_agree_on_ae}.

This time, however, the construction of the canonical model for a given
$\Sigma \in X_{\sLint}$ is much more straightforward. The set of
states is simply $X_\Sigma$, i.e. the equivalence class of
$\Sigma$ in $R$. Overriding earlier terminology, say $A
\subseteq X_\Sigma$ is \emph{S-closed} iff $|\phi|_\Sigma \subseteq A$
implies $|\S\phi|_\Sigma \subseteq A$ for all $\phi \in \cL$.
Then set
\[
    P_\Sigma = \{A \subseteq X_\Sigma \mid A \text{ is S-closed}\}.
\]
Finally, set $V_\Sigma(p) = |p|_\Sigma$, and write $M_\Sigma
= (X_\Sigma, P_\Sigma, V_\Sigma)$.

First, we have $M_\Sigma \in \Mint$, i.e. intersections of S-closed sets are
S-closed.  Indeed, suppose $\{A_i\}_{i \in I}$ is a collection of S-closed
sets, and suppose $|\phi|_\Sigma \subseteq \bigcap_{i \in I}{A_i}$. Then
$|\phi|_\Sigma \subseteq A_i$ for each $i$, so S-closure gives $|\S\phi|_\Sigma
\subseteq A_i$.  Hence $|\S\phi|_\Sigma \subseteq \bigcap_{i \in I}{A_i}$.

Importantly, we have the truth lemma for $M_\Sigma$: for all $\Gamma \in
    X_\Sigma$ and $\phi \in \cL$,
\[
    M_\Sigma, \Gamma \models \phi \iff \phi \in \Gamma,
\]
i.e. $\|\phi\|_{M_\Sigma} = |\phi|_\Sigma$.

As usual, the proof is by induction on formulas. The case for atomic
propositions follows from the definition of $V_\Sigma$, the cases for
conjunctions and negations hold by properties of maximally consistent sets,
and the case for $\A\phi$ holds by an argument identical to the one used in
the general case (\cref{lemma_truth_lemma}). The only interesting cases are
therefore for $\E\phi$ and $\S\phi$ formulas:

($\E$): First suppose $\E\phi \in \Gamma$. We claim $|\phi|_\Sigma$ is
S-closed. This will give $\|\phi\|_{M_\Sigma} \in P_\Sigma$ by the
induction hypothesis and definition of $P_\Sigma$, and therefore $M_\Sigma,
\Gamma \models \E\phi$.

So, suppose $|\psi|_\Sigma \subseteq |\phi|_\Sigma$. Then
$\A(\psi \limplies \phi) \in \Sigma$. Let $\Delta \in
|\S\psi|_\Sigma$. Since $\Delta, \Gamma, \Sigma \in X_\Sigma$,
we have $\E\phi \in \Delta$ and $\A(\psi \limplies \phi) \in
\Delta$ too. By $\weakeningE$, $\S\psi \land \E\phi \limplies
\phi \in \Delta$. But $\S\psi \in \Delta$, so $\S\psi \land
\E\phi \in \Delta$ and thus $\phi \in \Delta$, i.e.  $\Delta
\in |\phi|_\Sigma$. This shows $|\S\psi|_\Sigma \subseteq
|\phi|_\Sigma$, so $|\phi|_\Sigma$ is S-closed as required.

Now suppose $M_\Sigma, \Gamma \models \E\phi$. Then, by the
induction hypothesis, $|\phi|_\Sigma$ is S-closed. Since
$|\phi|_\Sigma \subseteq |\phi|_\Sigma$ clearly holds, we get
$|\S\phi|_\Sigma \subseteq |\phi|_\Sigma$. This implies
$\A(\S\phi \limplies \phi) \in \Sigma$, and $\redE$ gives
$\E\phi \in \Sigma$. Since $\Gamma \in X_\Sigma$, we get
$\E\phi \in \Gamma$ as required.

($\S$): Suppose $\S\phi \in \Gamma$. Take any $A \in P_\Sigma$
such that $\|\phi\|_{M_\Sigma} \subseteq A$. By the induction
hypothesis, $|\phi|_\Sigma \subseteq A$. By S-closure of $A$,
$|\S\phi|_\Sigma \subseteq A$. Hence $\Gamma \in
|\S\phi|_\Sigma \subseteq A$. This shows $M_\Sigma, \Gamma
\models \S\phi$.

For the other direction we show the contrapositive. Suppose
$\S\phi \notin \Gamma$. First, we claim $|\S\phi|_\Sigma$ is
S-closed. Indeed, suppose $|\psi|_\Sigma \subseteq
|\S\phi|_\Sigma$. Then $\A(\psi \limplies \S\phi) \in \Sigma$.
Take any $\Delta \in |\S\psi|_\Sigma$. Since $\Delta \in
X_\Sigma$, $\A(\psi \limplies \S\phi) \in \Delta$ also. By
$\weakeningS$, $\S\psi \limplies \S\S\phi \in \Delta$.  Now
$\S\psi \in \Delta$ implies $\S\S\phi \in \Delta$, and
$\foursoundness$ gives $\S\phi \in \Delta$, i.e.  $\Delta \in
|\S\phi|_\Sigma$. This shows $|\S\psi|_\Sigma \subseteq
|\S\phi|_\Sigma$, and thus $|\S\phi|_\Sigma$ is S-closed.

Hence $|\S\phi|_\Sigma$ is a set in $P_\Sigma$ not containing
$\Gamma$. Moreover, $\|\phi\|_{M_\Sigma} \subseteq
|\S\phi|_\Sigma$ by the induction hypothesis and $\Tsoundness$.
Hence $M_\Sigma, \Gamma \not\models \S\phi$.

Strong completeness now follows. If $\Gamma \not\entails_{\sLint} \phi$, then
$\Gamma \cup \{\neg\phi\}$ is consistent, so by Lindenbaum's Lemma
there is $\Sigma \in X_{\sLint}$ with $\Sigma \supseteq \Gamma \cup
\{\neg\phi\}$.  Considering the model $M_\Sigma \in \Mint$, we have
$M_\Sigma, \Sigma \models \Gamma$ and $M_\Sigma, \Sigma \not\models
\phi$ by the truth lemma. Hence $\Gamma \not\models_{\Mint} \phi$.


\end{proof}

\begin{proof}[Proof of \cref{thm_mtop_axiomatisation}]

Soundness was shown in the main text. For completeness, we go via relational
semantics using the translation $t: \cL \to \cLKA$ and
\cref{thm_s4s5_translation}. First, let $\sLsfoura$ be the logic of $\cLKA$
formulas formed by the axioms and inference rules shown in
\cref{tab_axioms_sfoura}. It is well known that $\sLsfoura$ is strongly
complete with respect to $\Msfour$~\citep[Theorem 7.2]{blackburn2002modal}.

\begin{table}[h]
    \begin{center}
        \begin{minipage}{174pt}
            \caption{Axioms and inference rules for $\sLsfoura$.}
            \label{tab_axioms_sfoura}
            \begin{tabular}{lr}
                \toprule
               $\K(\phi \limplies \psi) \limplies (\K\phi \limplies \K\psi)$
                   & $\Kk$ \\
               $\K\phi \limplies \phi$
                   & $\Tk$ \\
               $\K\phi \limplies \K\K\phi$
                   & $\fourk$ \\
               \midrule
               $\A(\phi \limplies \psi) \limplies (\A\phi \limplies \A\psi)$
                   & $\Kuniv$ \\
               $\A\phi \limplies \phi$
                   & $\Tuniv$ \\
               $\neg\A\phi \limplies \A\neg\A\phi$
                   & $\fiveuniv$ \\
               \midrule
               $\A\phi \limplies \K\phi$
                   & $\inck$ \\
               \midrule
               From $\phi$ infer $\A\phi$
                   & $\necuniv$ \\
               From $\phi \limplies \psi$ and $\phi$ infer $\psi$
                   & $\modpon$ \\
                \botrule
            \end{tabular}
        \end{minipage}
    \end{center}
\end{table}

Now, define a translation $u: \cLKA \to \cL$ as follows:
\[
\begin{array}{lll}
 &u(p) &= p \\
 &u(\phi \land \psi) &= u(\phi) \land u(\psi) \\
 &u(\neg\phi) &= \neg u(\phi) \\
 &u(\K\phi) &= \neg\S\neg u(\phi) \\
 &u(\A\phi) &= \A u(\phi).
\end{array}\]
Recall the translation $t: \cL \to \cLKA$ from
\cref{sec_connection_with_ep_logic}. While $u$ is not the inverse of $t$ (for
instance, there is no $\psi \in \cLKA$ with $u(\psi) = \E p$), for any $\phi
\in \cL$ we have that $\phi$ is $\sLtop$-provably equivalent to $u(t(\phi))$.

\begin{claim}
\label{claim_ut_equivalence}
Let $\phi \in \cL$. Then $\entails_{\sLtop}
\phi \liff u(t(\phi))$.
\end{claim}

\begin{proof}

By induction on $\cL$ formulas. The cases of atomic
propositions and propositional connectives are straightforward. For
the other cases, first note that the ``replacement of equivalents"
rule is derivable in $\sL$ (and thus in $\sLtop$) for
$\S$, $\E$ and $\A$:
\[
    \text{From } \phi \liff \psi \text{ infer } \bigcirc\phi \liff
    \bigcirc\psi \quad (\bigcirc \in \{\S, \E, \A\}).
\]
For $\S$ this follows from $\necuniv$ and $\weakeningS$; for $\E$ from
$\necuniv$ and $\reE$, and for $\A$ from $\necuniv$ and $\Kuniv$. Now for the
inductive step, suppose $\entails_{\sLtop} \phi \liff u(t(\phi))$.

\begin{itemize}\small
    \item $\S$: Note that
        \[
        u(t(\S\phi))
= u(\neg\K\neg t(\phi))
= \neg\neg\S\neg\neg u(t(\phi)).\]
        By the inductive hypothesis, propositional logic and replacement
of equivalents, $\entails_{\sLtop} \S\phi \liff
u(t(\S\phi))$.

        \item $\E$: We have
        \[
        \begin{aligned}
   u(t(\E\phi))
   &= u(\A(\neg t(\phi) \limplies \K\neg t(\phi))) \\
   &= \A u(\neg t(\phi) \limplies \K\neg t(\phi)) \\
   &= \A (u(\neg t(\phi)) \limplies u(\K\neg t(\phi))) \\
   &= \A (\neg u(t(\phi)) \limplies \neg\S\neg u(\neg t(\phi))) \\
   &= \A (\neg u(t(\phi)) \limplies \neg\S\neg \neg u(t(\phi))).
\end{aligned}\]
        Taking the contrapositive of the implication, and using
replacement of equivalents together with the inductive hypothesis,
we get
        \[
        \entails_{\sLtop} u(t(\E\phi))
    \liff
    \A(
       \S\phi \limplies \phi
    ).\]
        But we have already seen that $\entails_{\sLint} \E\phi
\liff \A(\S\phi \limplies \phi)$; since $\sLtop$ extends
$\sLint$, we get $\entails_{\sLtop} \E\phi \liff
u(t(\E\phi))$.

        \item $\A$: This case is straightforward by the inductive
hypothesis and replacement of equivalents, since
$u(t(\A\phi)) = \A u(t(\phi)$.

        \end{itemize}
\end{proof}

Next we show that if $\phi \in \cLKA$ is a theorem of
$\sLsfoura$, then $u(\phi)$ is a theorem of $\sLtop$.

\begin{claim}
\label{claim_u_thm}

Let $\phi \in \cLKA$. Then
$\entails_{\sLsfoura} \phi$ implies $\entails_{\sLtop}
u(\phi)$.

\end{claim}
    \begin{proof}
    By induction on the length of $\sLsfoura$ proofs. The base
case consists of showing that if $\phi$ is an instance of an
$\sLsfoura$ axiom or a subtitution instance of a
propositional tautology, then $\entails_{\sLtop} u(\phi)$.
The case for instances of tautologies is straightforward, since
$u$ does not affect the structure of a propositional formula.
We take the axioms of $\sLsfoura$ in turn.

    \begin{itemize}\small
    \item $\Kk$: We have
        \[
        \begin{aligned}
   &u(\K(\phi \limplies \psi) \limplies (\K\phi \limplies \K\psi))
    \\
   &\qquad
   = \neg\S\neg (u(\phi) \limplies u(\psi))
        \limplies (\neg\S\neg u(\phi) \limplies \neg\S\neg u(\psi))
       \\
   &\qquad
   = \hat\S (u(\phi) \limplies u(\psi)) \limplies
       (\hat\S u(\phi) \limplies \hat\S u(\psi))
\end{aligned}\]
        which is an instance of $\Ksoundness$.

        \item $\Tk$: We have
        \[
        u(\K\phi \limplies \phi)
= \neg\S\neg u(\phi) \limplies u(\phi)\]
        Taking the contrapositive, this is $\sLtop$-provably
equivalent to $\neg u(\phi) \limplies \S\neg u(\phi)$, which
is an instance of $\Tsoundness$.

        \item $\fourk$: We have
        \[
        u(\K\phi \limplies \K\K\phi)
= \neg\S\neg u(\phi) \limplies \neg\S\neg\neg\S\neg u(\phi)\]
        This is provably equivalent to $\S\S\neg u(\phi) \limplies
\S\neg u(\phi)$, which is an instance of $\foursoundness$.

        \item $\Kuniv$: We have
        \[
        u(\A(\phi \limplies \psi) \limplies (\A\phi \limplies \A\psi))
=
\A (u(\phi) \limplies u(\psi)) \limplies (\A u(\phi) \limplies \A u(\psi))\]
        which is an instance of $\Kuniv$ in $\sLtop$.

        \item $\Tuniv$: We have
        \[
        u(\A\phi \limplies \phi)
=
\A u(\phi) \limplies u(\phi)\]
        which is an instance of $\Tuniv$ in $\sLtop$.

        \item $\fiveuniv$: We have
        \[
        u(\neg\A\phi \limplies \A\neg\A\phi)
=
\neg\A u(\phi) \limplies \A \neg\A u(\phi)\]
        which is an instance of $\fiveuniv$ in $\sLtop$.

        \item $\inck$: We have
        \[
        u(\A\phi \limplies \K\phi)
=
\A u(\phi) \limplies \neg\S\neg u(\phi)
=
\A u(\phi) \limplies \hat\S u(\phi)\]
        which is an instance of $\inc$.

        \end{itemize}
    For the inductive step, we show that for each inference rule
$\frac{\psi_1,\ldots,\psi_n}{\phi}$, if
$\entails_{\sLtop}u(\psi_i)$ for each $i$ then
$\entails_{\sLtop}u(\phi)$.

    \begin{itemize}\small
    \item $\necuniv$: If $\entails_{\sLtop} u(\phi)$, then from
$\necuniv$ in $\sLtop$ we get
$\entails_{\sLtop} \A u(\phi)$. But $\A u(\phi) =
u(\A\phi)$, so we are done.

        \item $\modpon$: Similarly, this clear from $\modpon$ for
$\sLtop$ and the fact that $u(\phi \limplies \psi) =
u(\phi) \limplies u(\psi)$.

        \end{itemize}
    \end{proof}

\cref{claim_ut_equivalence,claim_u_thm} easily imply the following.

\begin{claim}
\label{claim_t_thm}

Let $\phi \in \cL$. Then
$\entails_{\sLsfoura} t(\phi)$ implies $\entails_{\sLtop}
\phi$.

\end{claim}

    \begin{proof}
    Suppose $\entails_{\sLsfoura} t(\phi)$. By \cref{claim_u_thm},
$\entails_{\sLtop} u(t(\phi))$. By \cref{claim_ut_equivalence},
$\entails_{\sLtop} \phi \liff u(t(\phi))$. By
$\modpon$, $\entails_{\sLtop} \phi$.

    \end{proof}

We can now show strong completeness. Suppose $\Gamma \subseteq \cL$, $\phi \in
\cL$ and $\Gamma \models_{\Mtop} \phi$. We claim $t(\Gamma) \models_{\Msfour}
t(\phi)$. Indeed, if $M^* \in \Msfour$ and $x$ is a state in $M^*$ with $M^*, x
\models t(\psi)$ for all $\psi \in \Gamma$, then with $f$ as in
\cref{thm_s4s5_translation} we have $f^{-1}(M^*), x \models \psi$ for all $\psi
\in \Gamma$. Since $f^{-1}(M^*) \in \Mint \cap \Munions \subseteq \Mtop$,
$\Gamma \models_{\Mtop} \phi$ gives $f^{-1}(M^*), x \models \phi$, and thus
$M^*, x \models t(\phi)$.

By (strong) completeness of $\sLsfoura$ for $\Msfour$, we get $t(\Gamma)
\entails_{\sLsfoura} t(\phi)$. That is, there are $\psi_0, \ldots, \psi_n \in
\Gamma$ such that $\entails_{\sLsfoura} t(\psi_0) \land \cdots \land t(\psi_n)
\limplies t(\phi)$. Since $t$ passes over conjunctions and implications, this
means $\entails_{\sLsfoura} t(\psi_0 \land \cdots \land \psi_n \limplies
\phi)$. By \cref{claim_t_thm}, $\entails_{\sLtop} \psi_0 \land \cdots \land
\psi_n \limplies \phi$. Hence $\Gamma \entails_{\sLtop} \phi$, and we are done.

\end{proof}

\begin{proof}[Proof of \cref{thm_mintcompl_axiomatisation}]
    For soundness, we need to check that $\fivesoundness$ is valid on
    $\Mint \cap \Mcompl$. Let $M = (X, P, V)$ be closed under intersections and
    complements, and suppose $M, x \models \S\neg\S\phi$. Note that
    $\|\S\phi\|_M = \bigcap\{A \in P \mid \|\phi\|_M \subseteq A\}$ is an
    intersection from $P$, so $\|\S\phi\|_M \in P$. By closure under
    complements, $\|\neg\S\phi\|_M \in P$ too. Hence $M, x \models \S\neg\S\phi
    \land \E\neg\S\phi$. By \cref{prop_validities} (4), we get $M, x \models
    \neg\S\phi$.

    The completeness proof goes in exactly the same way as
    \cref{thm_mtop_axiomatisation}. Letting $\sLsfivea$ be the extension of
    $\sLsfoura$ with the $\fivek$ axiom $\neg\K\phi \limplies \K\neg\K\phi$, it
    can be shown that $\sLsfivea$ is strongly complete with respect to
    $\Msfive$.  With $u$ as in the proof of \cref{thm_mtop_axiomatisation}, we
    have that $\entails_{\sLsfivea} \phi$ implies $\entails_{\sLintcompl}
    u(\phi)$, for $\phi \in \cLKA$ (the only new part to check there is that
    $u(\neg\K\phi \limplies \K\neg\K\phi)$ is a theorem of $\sLintcompl$, but
    this follows from $\fivesoundness$). The remainder of the proof goes
    through as before, this time appealing to the bijection $g: \Mint \cap
    \Mcompl \to \Msfive$.

\end{proof}

\begin{proof}[Proof of \cref{prop_shared_common_collapse}]

Let $M^* = (X, \{R_j\}_{j \in \J}, V)$ be a multi-source relational
model. Since $\Kcommon_J\psi \limplies \Kshared_J\psi$ is valid for
any $\psi$, the left-to-right implication of the above equivalence
is straightforward.

For the right-to-left implication, suppose $M^*, x \models
\A(\neg\phi \limplies \Kshared_J\neg\phi)$. We show by induction that
$M^*, x \models \A(\neg\phi \limplies \K_J^n\neg\phi)$ for all
$n \in \N$, from which the result follows.

The base case $n = 1$ is given, since $\K_J^1\neg\phi =
\Kshared_J\neg\phi$. For the inductive step, suppose $M^*, x
\models \A(\neg\phi \limplies \K_J^n\neg\phi)$. Take $y \in X$ such
that $M^*, y \models \neg\phi$. Let $j \in J$. Take $z
\in X$ such that $y{R_j}z$. From the initial assumption we have
$M^*, y \models \Kshared_J\neg\phi$, so $M^*, y \models
\K_j\neg\phi$ and thus $M^*, z \models \neg\phi$. By the inductive
hypothesis, $M^*, z \models \K_J^n\neg\phi$. This shows that
$M^*, y \models \K_j\K_J^n\neg\phi$ for all $j \in J$, and
thus $M^*, y \models K^{n+1}_J\neg\phi$. Hence $M^*, x
\models \A(\neg\phi \limplies \K^{n+1}_J\neg\phi)$ as required.

\end{proof}

% \begin{proof}[Proof of \cref{prop_dynamic_validities}]\leavevmode
% \begin{enumerate}\small
% \item Using the reduction axioms for atomic propositions, conjunctions and
% negations, one can show by induction that $[\sndann\phi]\alpha$
% is equivalent to $\S\phi \limplies \alpha$. Applying this with
% $\phi = \alpha$, we have that $\A[\sndann\alpha]\alpha$ is
% equivalent to $\A(\S\alpha \limplies \alpha)$, which is
% equivalent to $\E\alpha$ for models closed under intersections.

%     \item We use the following fact, whose proof is straightforward by
% induction on $\cLzero$ formulas.

%     \begin{itemize}\small
%     \item For $\alpha \in \cLzero$, $\phi \in \cL$ and any model
% $M$, $\|\alpha\|_{M^{\expinc\phi}} = \|\alpha\|_M$ and
% $\|\alpha\|_{M^{\sndann\phi}} = \|\alpha \land \S\phi\|_M$.

%         \end{itemize}
%     Now, take $M = (X, P, V) \in \Mint$, $x \in X$, and
% suppose $M, x \models \A(\alpha \limplies \beta)$. Then
% $\|\alpha\|_M \subseteq \|\beta\|_M$.

%     We need to show $M, x \models
% [\expinc\beta][\sndann\alpha]\beta$, i.e. $M^{\expinc\beta}, x
% \models [\sndann\alpha]\beta$. Suppose $M^{\expinc\beta}, x
% \models \S\alpha$. To show $(M^{\expinc\beta})^{\sndann\alpha},
% x \models \beta$, we need
%     \[
%     x \in \|\beta\|_{(M^{\expinc\beta})^{\sndann\alpha}}
% = \|\beta \land \S\alpha\|_{M^{\expinc\beta}}\]
%     where the equality follows from the claim above. By assumption
% $M^{\expinc\beta}, x \models \S\alpha$, so we only need to show
% $M^{\expinc\beta}, x \models \beta$.

%     Since $[\expinc\beta]\E\beta$ is valid in $M$, we have
% $M^{\expinc\beta}, x \models \E\beta$. From
% \cref{prop_validities} (3), $M^{\expinc\beta}, x \models
% \A(\alpha \limplies \beta) \limplies (\S\alpha \land \E\beta \limplies
% \beta)$. But from the above claim and $\|\alpha\|_M \subseteq
% \|\beta\|_M$ we have $\|\alpha\|_{M^{\expinc\beta}} \subseteq
% \|\beta\|_{M^{\expinc\beta}}$, i.e. $M^{\expinc\beta}, x \models
% \A(\alpha \limplies \beta)$. Hence $M^{\expinc\beta}, x \models
% \beta$, and we are done.

%     \item Taking $\beta = \alpha$, this validity follows from (2).

%     \end{enumerate}
% \end{proof}
